import{d as F,r as _,j as V,C as M,k as z,W as E,c as m,o as u,a as i,h as A,u as r,m as I,w as S,b as l,e as k,t as d,f as w,F as g,l as v,x as N,q as T,v as y,y as P}from"./app-B-cmbjvL.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-PEPtDQ3f.js";import{P as Z}from"./Pagination-B66SzgXw.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-CyUlp5Kt.js";import{_ as H}from"./GthSuccess.vue_vue_type_script_setup_true_lang-kvLgG3Gb.js";import{_ as O}from"./Checkbox.vue_vue_type_script_setup_true_lang-CcG7xGwb.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CzG4im2e.js";import"./RovingFocusGroup-2U8FBijs.js";import"./useForwardExpose-CZ06Ebnk.js";const G={class:"px-4 pt-4 w-full max-w-7xl mx-auto"},J={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},K={class:"p-6 bg-white border-b border-gray-200 flex justify-between"},Q={class:"max-w-7xl mx-auto px-4"},X={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Y={class:"p-4 bg-white border-b border-gray-200"},ee={class:"flex justify-between space-x-2"},se=["value"],le=["value"],te={class:"w-full flex-row flex-no-wrap bg-white rounded-lg overflow-hidden sm:shadow-lg my-2 inline-table"},oe={class:"flex-1 sm:flex-none space-y-2"},ae={class:"text-white bg-gray-400 flex flex-col flex-no wrap sm:table-row rounded-t-lg"},re=["title","onClick"],ne={class:"border-grey-light border hover:bg-gray-100 p-2 text-left sm:text-center"},ie={class:"border-grey-light border p-2"},de={class:"border-grey-light border p-2"},me=["innerHTML"],ue={class:"border-grey-light border p-2 truncate text-left sm:text-center space-x-2"},fe=["onClick","title"],pe=["onClick","title"],ce={key:0,class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},be={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ge={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full md:max-w-3xl lg:max-w-4xl",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},he={class:"font-semibold text-xl p-2 bg-gray-100 rounded-t-md mx-4 mt-4"},we={class:"grid grid-cols-3 sm:grid-cols-6 gap-1 sm:gap-2 bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ve={class:"flex flex-row"},ye={class:"self-center p-1 bg-gray-100 rounded-md mr-1 font-bold"},xe={class:"flex flex-row"},_e={class:"self-center p-1 bg-gray-100 rounded-md mr-1 font-bold"},Ve={class:"bg-gray-100 px-4 py-3 sm:px-6 text-right space-x-2"},ke=["disabled"],Ue=F({__name:"Teachers",props:{firstUserId:{},teachers:{},tableLabels:{},filters:{},fields:{},queryStr:{},formTeachers:{},initFormRows:{}},setup(L){const f=L,x=_(1),U=_(!1),h=_(!1),b=V({open:!1}),p=V({msg:""}),t=M(f.formTeachers),n=V({page:f.filters.page,rows:f.filters.rows,search:f.filters.search,field:f.filters.field,direction:f.filters.direction});z(n,(o,s)=>{let e=n;Object.keys(e).forEach(a=>{e[a]==""&&delete e[a]}),E.get(route("teachers"),e,{replace:!0,preserveState:!0,preserveScroll:!0})});function j(o){o!=""&&(n.field!==o?n.direction="asc":n.direction=n.direction=="asc"?"desc":"asc",n.field=o)}function C(o){t.reset(),p.msg="",o?(x.value=Math.ceil(o.anatheseis.length/2+.5),h.value=!0,t.id=o.id,t.name=o.name,t.email=o.email,t.role_id=o.role_id==1,U.value=o.role_id==1,o.anatheseis&&o.anatheseis.forEach((e,a)=>{t.anathesi[a].tmima=e.tmima,t.anathesi[a].mathima=e.mathima})):(h.value=!1,x.value=f.initFormRows),b.open=!0;const s=e=>{e.keyCode===27&&(b.open=!1,document.removeEventListener("keydown",s))};document.addEventListener("keydown",s)}function B(o){E.delete(`deleteTeacher/${o.id}`,{onBefore:()=>confirm(o.name+`

Θέλετε να διαγραφεί?`),preserveScroll:!0})}function q(){if(!t.name){p.msg="Συμπληρώστε το Ονοματεπώνυμο.";return}if(!t.email){p.msg="Συμπληρώστε το Email.";return}let o=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;if(t.email&&!t.email.match(o)){p.msg=`Το email "${t.email}" δεν είναι έγκυρο.`;return}if(!t.id&&!t.password){p.msg="Συμπληρώστε το Password.";return}let s=!0;if(h&&(f.teachers.data.forEach(e=>{if(t.id==e.id){t.email!==e.email&&(s=!1);return}}),s&&(t.post(route("teachers.store"),{preserveScroll:!0}),b.open=!1,t.reset())),!h||!s){let e=t.email;P.get("uniqueEmail/"+e).then(function(a){if(a.data>0){p.msg=`Το Email "${e}" χρησιμοποιείται.`;return}else t.post(route("teachers.store"),{preserveScroll:!0}),b.open=!1,t.reset()})}}function D(){return new Date().toLocaleTimeString()}return(o,s)=>(u(),m(g,null,[i(r(I),{title:"Καθηγητές"}),i(R,null,{default:S(()=>[i(H,null,{default:S(()=>[k(d(D()),1)]),_:1}),l("div",G,[l("div",J,[l("div",K,[s[8]||(s[8]=l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Καθηγητές ",-1)),l("button",{onClick:s[0]||(s[0]=e=>C()),class:"gthButton mr-10 md:mr-0"}," Εισαγωγή καθηγητή ")])])]),l("div",null,[l("div",Q,[l("div",X,[l("div",Y,[l("div",ee,[w(l("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>n.rows=e),value:o.filters.rows,class:"border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-100 rounded-md shadow-sm p-1 sm:px-2 w-20"},[(u(),m(g,null,v([10,20,50,100],e=>l("option",{key:e,value:e},d(e),9,le)),64))],8,se),[[N,n.rows]]),i(c,{modelValue:n.search,"onUpdate:modelValue":s[2]||(s[2]=e=>n.search=e),type:"text",class:"w-3/4 sm:w-auto",placeholder:"Αναζήτηση"},null,8,["modelValue"])]),l("table",te,[l("tbody",oe,[l("tr",ae,[(u(!0),m(g,null,v(o.tableLabels,(e,a)=>(u(),m("td",{key:e,class:T(["p-2 font-semibold",{"text-left sm:text-center":a<1,"sm:hidden lg:table-cell":a==o.tableLabels.length-2}]),title:a>0&&a<4?n.field!==o.fields[a]||n.field==o.fields[a]&&n.direction=="desc"?"αύξουσα ταξινόμηση κατά "+e:"φθίνουσα ταξινόμηση κατά "+e:"",onClick:$=>j(o.fields[a])},[w(l("span",null,"↗",512),[[y,n.field==o.fields[a]&&n.direction=="asc"]]),w(l("span",null,"↘",512),[[y,n.field==o.fields[a]&&n.direction=="desc"]]),k(" "+d(e),1)],10,re))),128))]),(u(!0),m(g,null,v(o.teachers.data,(e,a)=>(u(),m("tr",{key:e.name,class:"flex flex-col flex-no wrap sm:table-row hover:bg-gray-100 text-sm align-text-top"},[l("td",ne,d(a+o.teachers.from),1),l("td",ie,d(e.role_id==1?"⚡":"")+" "+d(e.name),1),l("td",de,d(e.email),1),l("td",{class:"border-grey-light border p-2 sm:hidden lg:table-cell overflow-hidden",innerHTML:e.strAnatheseis},null,8,me),l("td",ue,[l("button",{onClick:$=>C(e),class:"bg-yellow-200 px-0.5 border rounded",title:"Επεξεργασία "+e.name}," 🖋 ",8,fe),w(l("button",{onClick:$=>B(e),class:"bg-red-200 px-1 border rounded",title:"Διαγραφή "+e.name}," 🗑 ",8,pe),[[y,o.firstUserId!==e.id]])])]))),128))])]),i(Z,{class:"mx-auto pt-4",links:o.teachers.links,queryStr:o.queryStr},null,8,["links","queryStr"])])])])])]),_:1}),b.open?(u(),m("div",ce,[l("div",be,[s[17]||(s[17]=l("div",{class:"fixed inset-0 transition-opacity"},[l("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[18]||(s[18]=l("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),s[19]||(s[19]=k("​ ")),l("div",ge,[l("div",he,d(h.value?"Επεξεργασία":"Εισαγωγή")+" καθηγητή ",1),w(l("div",{class:"text-red-500 mx-4 p-2 text-center"},d(p.msg),513),[[y,p.msg]]),l("div",we,[s[9]||(s[9]=l("span",{class:"self-center"},"Ονομ/νυμο",-1)),i(c,{modelValue:r(t).name,"onUpdate:modelValue":s[3]||(s[3]=e=>r(t).name=e),class:"w-full p-1 col-span-2 sm:col-span-3 border"},null,8,["modelValue"]),s[10]||(s[10]=l("span",{class:"self-center sm:justify-self-end"},"Διαχειριστής",-1)),i(O,{modelValue:r(t).role_id,"onUpdate:modelValue":s[4]||(s[4]=e=>r(t).role_id=e),checked:r(t).role_id,disabled:U.value,class:"self-center justify-self-center col-span-2 sm:col-span-1"},null,8,["modelValue","checked","disabled"]),s[11]||(s[11]=l("span",{class:"self-center"},"Email",-1)),i(c,{modelValue:r(t).email,"onUpdate:modelValue":s[5]||(s[5]=e=>r(t).email=e),class:"w-full p-1 col-span-2 border"},null,8,["modelValue"]),s[12]||(s[12]=l("span",{class:"self-center"},"Password",-1)),i(c,{modelValue:r(t).password,"onUpdate:modelValue":s[6]||(s[6]=e=>r(t).password=e),class:"w-full p-1 col-span-2 border"},null,8,["modelValue"]),s[13]||(s[13]=l("span",{class:"self-baseline pl-6"},"Τμήμα",-1)),s[14]||(s[14]=l("span",{class:"col-span-2 self-baseline"},"Μάθημα",-1)),s[15]||(s[15]=l("span",{class:"hidden sm:table-cell self-baseline pl-6"},"Τμήμα",-1)),s[16]||(s[16]=l("span",{class:"hidden sm:table-cell col-span-2 self-baseline"},"Μάθημα",-1)),(u(!0),m(g,null,v(x.value,e=>(u(),m(g,{key:e},[l("div",ve,[l("span",ye,d((e-1)*2+1),1),i(c,{modelValue:r(t).anathesi[(e-1)*2].tmima,"onUpdate:modelValue":a=>r(t).anathesi[(e-1)*2].tmima=a,class:"w-full p-1 border"},null,8,["modelValue","onUpdate:modelValue"])]),i(c,{modelValue:r(t).anathesi[(e-1)*2].mathima,"onUpdate:modelValue":a=>r(t).anathesi[(e-1)*2].mathima=a,class:"w-full p-1 col-span-2 border"},null,8,["modelValue","onUpdate:modelValue"]),l("div",xe,[l("span",_e,d((e-1)*2+1+1),1),i(c,{modelValue:r(t).anathesi[(e-1)*2+1].tmima,"onUpdate:modelValue":a=>r(t).anathesi[(e-1)*2+1].tmima=a,class:"w-full p-1 border"},null,8,["modelValue","onUpdate:modelValue"])]),i(c,{modelValue:r(t).anathesi[(e-1)*2+1].mathima,"onUpdate:modelValue":a=>r(t).anathesi[(e-1)*2+1].mathima=a,class:"w-full p-1 col-span-2 border"},null,8,["modelValue","onUpdate:modelValue"])],64))),128))]),l("div",Ve,[l("button",{onClick:q,type:"button",disabled:!r(t).isDirty,class:T(["gthButton disabled:opacity-50",{"cursor-not-allowed":!r(t).isDirty}])}," Αποθήκευση ",10,ke),l("button",{onClick:s[7]||(s[7]=e=>b.open=!1),type:"button",class:"gthButton"}," Άκυρο ")])])])])):A("",!0)],64))}}),Fe=W(Ue,[["__scopeId","data-v-9b83b981"]]);export{Fe as default};
