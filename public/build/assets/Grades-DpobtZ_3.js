import{d as j,r as k,C as B,g as A,c as f,o as u,a as v,h as M,u as g,m as T,w,b as s,f as l,t as c,v as n,F as b,l as y,q as _,P as N,e as x}from"./app-B-cmbjvL.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-PEPtDQ3f.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-CyUlp5Kt.js";import{_ as F}from"./GthSuccess.vue_vue_type_script_setup_true_lang-kvLgG3Gb.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CzG4im2e.js";import"./RovingFocusGroup-2U8FBijs.js";import"./useForwardExpose-CZ06Ebnk.js";const D={class:"px-4 pt-4 w-full max-w-7xl mx-auto"},z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},H={class:"p-6 bg-white border-b border-gray-200 flex justify-between"},K={class:"w-max self-center space-x-1 sm:space-x-2"},U=["href"],q=["href"],J=["href"],Q={class:"max-w-7xl mx-auto px-4"},R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-4 bg-white border-b border-gray-200 space-y-4"},X={class:"flex flex-wrap border border-gray-200 rounded-md p-4"},Y={class:"font-bold text-center text-2xl text-gray-900"},Z={class:"text-center font-semibold text-3xl text-gray-700 py-24"},ee={class:"flex flex-col rounded-md max-w-3xl mx-auto"},se={class:"pt-4 flex flex-col space-y-2 text-center sm:px-20 sm:flex-row sm:space-y-0 sm: sm:justify-between"},te={class:"font-semibold"},re={class:"pt-4 pb-1 flex flex-col space-y-1 text-center sm:flex-row sm:space-y-0 sm: sm:justify-between"},oe={class:"flex w-max justify-evenly border-2 border-gray-300 p-1 rounded-md self-center bg-gray-100 font-semibold"},ae={class:"w-6"},de=["Key"],ie={class:"flex flex-row space-x-2 pt-2"},le={class:"w-6 text-right"},ne={class:"w-10"},ce={class:"flex w-max justify-evenly border-2 border-gray-300 px-1 py-0.5 rounded-md self-center bg-gray-100"},me=["onClick","title"],fe={class:"bg-blue-200 px-1 rounded-md border cursor-pointer"},ue={class:"w-24 mr-1 self-center"},pe={class:"pt-4 flex flex-col space-y-2 text-center sm:px-20 sm:flex-row sm:space-y-0 sm: sm:justify-between"},ve={class:"font-semibold"},he={key:0,class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},ge={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},be={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full md:max-w-xl",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},we=["innerHTML"],ye={class:"bg-gray-100 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},xe=j({__name:"Grades",props:{anatheseis:{},selectedAnathesiId:{},selectedTmima:{},selectedMathima:{},arrStudents:{},gradesStudentsPeriod:{},gradesPeriodLessons:{},mathimata:{},activeGradePeriod:{},periods:{},showOtherGrades:{},gradeBaseAlert:{},infoInsertedAnatheseis:{},infoNotInsertedAnatheseis:{}},setup(I){const o=I,m=k(""),h=k(!1),p=B(o.gradesStudentsPeriod),G=A(function(){let e="",r={};return o.anatheseis.forEach(t=>{e!==t.mathima?r[t.id]=!0:r[t.id]=!1,e=t.mathima}),r});function P(){let e="";if(o.arrStudents.forEach(d=>{let i=!1,a=p[d.id][o.activeGradePeriod];a&&a.trim()&&(o.activeGradePeriod<3&&isNaN(a)&&a!=="Δ"&&(i=!0),o.activeGradePeriod==3&&isNaN(a.replace(",","."))&&(i=!0),o.activeGradePeriod<3&&!isNaN(a.replace(",","."))&&!/^\d{1,2}$/.test(a)&&(i=!0),o.activeGradePeriod==3&&!isNaN(a.replace(",","."))&&!/^\d{1,2}(?:[\.\,]\d)?$/.test(a)&&parseFloat(a.replace(",","."))!==-1&&(i=!0),!isNaN(a.replace(",","."))&&a.replace(",",".")>20&&(i=!0),i&&(e+=`
     `+d.eponimo+" "+d.onoma+": "+a))}),e)return alert(`Μπορείτε να καταχωρίσετε
     μόνο αριθμούς από το 0 έως το 20
               ακέραιους στο Α & Β Τετράμηνο
               ακέραιους ή με 1 δεκαδικό ψηφίο στα Γραπτά
      ''Δ'' αν δεν έχετε άποψη για βαθμό Τετραμήνου
     ''-1'' αν δεν προσήλθε σε Γραπτή εξέταση

Παρακαλώ ελέγξτε τα ακόλουθα:`+e),!1;o.gradeBaseAlert==0&&p.post(route("grades.store")+"/"+o.selectedAnathesiId);let r="";o.arrStudents.forEach(d=>{let i=p[d.id][o.activeGradePeriod];i&&i.trim()&&i<o.gradeBaseAlert&&parseFloat(i.replace(",","."))!==-1&&(r+=`
`+d.eponimo+" "+d.onoma+": "+i)});let t=!0;r&&(t=confirm(`Προσοχή!
Καταχωρίζονται βαθμοί κάτω από τη βάση του `+o.gradeBaseAlert+`.
`+r+`

Θέλετε να συνεχιστεί η καταχώριση?`)),t&&p.post(route("grades.store")+"/"+o.selectedAnathesiId,{preserveScroll:!0})}const L=A(function(){let e={};return o.arrStudents.forEach(r=>{o.gradesPeriodLessons[r.id]?(e[r.id]=!1,o.mathimata.forEach(t=>{t!==o.selectedMathima&&o.gradesPeriodLessons[r.id][t]&&o.gradesPeriodLessons[r.id][t][o.activeGradePeriod]&&(e[r.id]=!0)})):e[r.id]=!1}),e});function S(e){m.value="<div class='font-semibold text-xl p-2 bg-gray-100 rounded-t-md'>"+o.gradesPeriodLessons[e].name+"</div>",m.value+=`
        <table class="w-full mt-4">
        <tr><th>ΜΑΘΗΜΑ</th>`;for(var r in o.periods)r<=o.activeGradePeriod&&(m.value+="<th class='text-center'>"+o.periods[r].substr(0,6)+"</th>");m.value+="</tr>";for(var t in o.gradesPeriodLessons[e])if(t!="name"){m.value+="<tr><td>"+t+"</td>";for(var d=1;d<=o.activeGradePeriod;d++)o.gradesPeriodLessons[e][t][d]?m.value+="<td  class='text-center'>"+o.gradesPeriodLessons[e][t][d]+"</td>":m.value+="<td  class='text-center'>&nbsp;</td>";m.value+="</tr>"}m.value+="</table>",h.value=!0;const i=a=>{h&&a.keyCode===27&&(h.value=!1,document.removeEventListener("keydown",i))};document.addEventListener("keydown",i)}function C(){return new Date().toLocaleTimeString()}return(e,r)=>(u(),f(b,null,[v(g(T),{title:"Βαθμολογία"}),v(V,null,{default:w(()=>[s("div",D,[s("div",z,[s("div",H,[r[1]||(r[1]=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Βαθμολογία ",-1)),l(s("div",K,[l(s("a",{class:"gth",href:e.route("insertedGrades",[1])}," Καταχωρίστηκαν "+c(e.infoInsertedAnatheseis),9,U),[[n,e.infoInsertedAnatheseis]]),l(s("a",{class:"gth",href:e.route("insertedGrades",[0])}," Υπολείπονται "+c(e.infoNotInsertedAnatheseis),9,q),[[n,e.infoNotInsertedAnatheseis]]),l(s("a",{class:"gth",href:e.route("insertedGradesStudents")}," Μαθητές χωρίς βαθμούς ",8,J),[[n,!e.infoNotInsertedAnatheseis]])],512),[[n,e.activeGradePeriod!=0]])])])]),s("div",null,[s("div",Q,[s("div",R,[s("div",W,[s("div",X,[r[3]||(r[3]=s("span",{class:"font-bold"},"Επιλογή μαθήματος - τμήματος:",-1)),(u(!0),f(b,null,y(e.anatheseis,t=>(u(),f("div",{key:t.id,class:"space-x-1"},[l(s("span",{class:_(["font-semibold",{"pl-1":G.value[t.id]}])},c(t.mathima)+":",3),[[n,G.value[t.id]]]),v(g(N),{href:e.route("grades",{a:t.id}),class:_(["mr-1",{"bg-gray-500 text-gray-100 font-bold px-2 rounded-md":e.selectedAnathesiId===t.id}]),title:"Επιλογή "+t.mathima+" - "+t.tmima},{default:w(()=>[x(c(t.tmima),1)]),_:2},1032,["href","class","title"])]))),128)),l(v(g(N),{href:e.route("grades"),class:_(["text-xl pl-2",{"bg-gray-500 text-gray-100 px-2 rounded-md font-bold":!e.selectedAnathesiId}]),title:"Αποεπιλογή μαθήματος - τμήματος"},{default:w(()=>r[2]||(r[2]=[x("☒")])),_:1},8,["href","class"]),[[n,e.$page.props.auth.user.permissions.admin]])]),s("div",Y,c(e.periods[e.activeGradePeriod]),1),v(F,null,{default:w(()=>[x(c(C()),1)]),_:1}),l(s("div",Z," Επιλέξτε ένα τμήμα. ",512),[[n,!e.selectedAnathesiId]]),l(s("div",ee,[s("div",se,[s("div",te,c(e.selectedTmima)+" -> "+c(e.selectedMathima),1),l(s("button",{onClick:P,class:"gth"}," Αποθήκευση ",512),[[n,e.activeGradePeriod!=="0"]])]),s("div",re,[r[6]||(r[6]=s("div",{class:"font-semibold"},"Ονοματεπώνυμο",-1)),l(s("div",oe,[l(s("div",ae,r[4]||(r[4]=[s("span",{class:"px-1"}," 👁 ",-1)]),512),[[n,e.showOtherGrades]]),(u(!0),f(b,null,y(e.periods,(t,d)=>l((u(),f("div",{key:d,class:"w-16"},c(t.substr(0,6)),1)),[[n,d<=e.activeGradePeriod]])),128)),r[5]||(r[5]=s("div",{class:"w-24 text-left mr-1"},"Ολογράφως",-1))],512),[[n,e.activeGradePeriod!=="0"]])]),(u(!0),f(b,null,y(e.arrStudents,(t,d)=>(u(),f("div",{Key:t.id,class:"py-0.5 flex flex-col sm:flex-row sm:justify-between"},[s("div",ie,[s("div",le,c(d+1)+".",1),s("div",ne,c(t.id),1),s("div",null,c(t.eponimo)+" "+c(t.onoma),1)]),l(s("div",ce,[l(s("div",{class:"w-6 self-center",onClick:i=>S(t.id),title:"δείξε όλους τους βαθμούς για "+t.eponimo+" "+t.onoma},[l(s("span",fe," 👁 ",512),[[n,L.value[t.id]]])],8,me),[[n,e.showOtherGrades]]),(u(!0),f(b,null,y(e.periods,(i,a)=>l((u(),f("div",{key:a,class:"w-16 text-center"},[v($,{modelValue:g(p)[t.id][a],"onUpdate:modelValue":E=>g(p)[t.id][a]=E,class:"w-12 h-7 text-center enabled:bg-white",disabled:a!==e.activeGradePeriod},null,8,["modelValue","onUpdate:modelValue","disabled"])])),[[n,a<=e.activeGradePeriod]])),128)),s("div",ue,c(t.olografos),1)],512),[[n,e.activeGradePeriod!=="0"]])],8,de))),256)),s("div",pe,[s("div",ve,c(e.selectedTmima)+" -> "+c(e.selectedMathima),1),l(s("button",{onClick:P,class:"gth"}," Αποθήκευση ",512),[[n,e.activeGradePeriod!=="0"]])])],512),[[n,e.selectedAnathesiId]])])])])])]),_:1}),h.value?(u(),f("div",he,[s("div",ge,[r[7]||(r[7]=s("div",{class:"fixed inset-0 transition-opacity"},[s("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),r[8]||(r[8]=s("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),r[9]||(r[9]=x("​ ")),s("div",be,[s("div",{class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",innerHTML:m.value},null,8,we),s("div",ye,[s("button",{onClick:r[0]||(r[0]=t=>h.value=!1),type:"button",class:"gth"}," Εντάξει ")])])])])):M("",!0)],64))}}),Se=O(xe,[["__scopeId","data-v-7d327c20"]]);export{Se as default};
